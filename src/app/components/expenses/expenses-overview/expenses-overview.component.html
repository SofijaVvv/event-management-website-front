<div class="flex flex-col bg-color w-full h-screen select-none">
  <div
    class="flex items-center justify-between pl-4 pr-4 bg-white border-b border-b-gray-300"
  >
    <div>
      <div class="text-xl text-[#0E4166FF] font-family font-medium">
        {{ "list.expenses" | translate }}
      </div>
    </div>
    <div class="flex items-center justify-center shadow bg-white rounded">
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="loadWeekEvents()">
          <svg
            class="inline-block mr-4 leading-5"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7"
                stroke="#2B88CC"
                stroke-width="2"
                stroke-linecap="round"
              ></path>
              <rect
                x="6"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="10.5"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="15"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
            </g>
          </svg>
          <span>{{ "timeline.week" | translate }}</span>
        </button>

        <button mat-menu-item (click)="loadLast14DaysEvents()">
          <svg
            class="inline-block mr-4 leading-5"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7"
                stroke="#2B88CC"
                stroke-width="2"
                stroke-linecap="round"
              ></path>
              <rect
                x="6"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="10.5"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="15"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
            </g>
          </svg>
          <span>{{ "timeline.14days" | translate }}</span>
        </button>

        <button mat-menu-item (click)="loadMonthEvents()">
          <svg
            class="inline-block mr-4 leading-5"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7"
                stroke="#2B88CC"
                stroke-width="2"
                stroke-linecap="round"
              ></path>
              <rect
                x="6"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="10.5"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="15"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
            </g>
          </svg>
          <span>{{ "timeline.month" | translate }}</span>
        </button>

        <mat-divider></mat-divider>
        <button mat-menu-item [matMenuTriggerFor]="months">
          <svg
            class="inline-block mr-4 leading-5"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7"
                stroke="#2B88CC"
                stroke-width="2"
                stroke-linecap="round"
              ></path>
              <rect
                x="6"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="10.5"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
              <rect
                x="15"
                y="12"
                width="3"
                height="3"
                rx="0.5"
                fill="#2B88CC"
              ></rect>
            </g>
          </svg>
          <span>{{ "timeline.select.month" | translate }}</span>
        </button>
        <mat-menu #months>
          <button
            mat-menu-item
            *ngFor="let month of monthList"
            (click)="loadSelectedMonthEvents(month.id - 1)"
          >
            <svg
              class="inline-block mr-4 leading-5"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  d="M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7"
                  stroke="#2B88CC"
                  stroke-width="2"
                  stroke-linecap="round"
                ></path>
                <rect
                  x="6"
                  y="12"
                  width="3"
                  height="3"
                  rx="0.5"
                  fill="#2B88CC"
                ></rect>
                <rect
                  x="10.5"
                  y="12"
                  width="3"
                  height="3"
                  rx="0.5"
                  fill="#2B88CC"
                ></rect>
                <rect
                  x="15"
                  y="12"
                  width="3"
                  height="3"
                  rx="0.5"
                  fill="#2B88CC"
                ></rect>
              </g>
            </svg>
            <span>{{ month.name }}</span>
          </button>
        </mat-menu>
      </mat-menu>
    </div>

    <div class="flex relative items-center p-2">
      <div class="flex items-center mb-2 gap-3">
        <div>
          <ng-select
            class="custom-select w-40"
            [items]="filterOptions"
            [formControl]="selectedFilter"
            bindLabel="name"
            placeholder="Choose user"
            [virtualScroll]="true"
            [clearable]="false"
            (change)="filterCosts()"
          >
            <ng-template ng-option-tmp let-item="item" let-search="searchTerm">
              <div>{{ item.name }}</div>
            </ng-template>
          </ng-select>
        </div>

        <button
          *ngIf="appData.can_edit"
          (click)="addCost()"
          class="text-white text-sm py-2.5 px-4 rounded-[8px] bg-color-2"
        >
          {{ "add.expense" | translate }}
        </button>
      </div>
    </div>
  </div>

  <div class="flex justify-between items-center gap-2 pl-6 mt-2 pr-4 pt-2">
    <div class="flex items-center gap-2">
      <div class="w-6 h-6">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          x="0px"
          y="0px"
          viewBox="0,0,256,256"
        >
          <g
            fill="#275c85"
            fill-rule="nonzero"
            stroke="none"
            stroke-width="1"
            stroke-linecap="butt"
            stroke-linejoin="miter"
            stroke-miterlimit="10"
            stroke-dasharray=""
            stroke-dashoffset="0"
            font-family="none"
            font-weight="none"
            font-size="none"
            text-anchor="none"
            style="mix-blend-mode: normal"
          >
            <g transform="scale(5.33333,5.33333)">
              <path
                d="M24.60742,4.04297c-0.26038,-0.00941 -0.52612,0.01117 -0.79297,0.06445l-15.19727,3.03906c-2.09435,0.41947 -3.61719,2.27651 -3.61719,4.41211v24.88281c0,2.13497 1.52301,3.99326 3.61719,4.41211l15.19727,3.03906c1.94433,0.38861 3.74215,-1.00166 4.06055,-2.89258h9.625c3.01977,0 5.5,-2.48023 5.5,-5.5v-22c0,-3.01977 -2.48023,-5.5 -5.5,-5.5h-9.5v-0.46094c0,-1.90506 -1.56991,-3.4302 -3.39258,-3.49609zM24.40234,7.04883c0.33922,-0.06773 0.59766,0.14345 0.59766,0.49023v32.92188c0,0.34679 -0.25873,0.55818 -0.59766,0.49023c0,-0.00065 0,-0.0013 0,-0.00195l-15.19531,-3.03906c-0.00065,0 -0.0013,0 -0.00195,0c-0.71088,-0.14187 -1.20508,-0.74434 -1.20508,-1.46875v-24.88281c0,-0.72441 0.49538,-1.32817 1.20703,-1.4707zM28,11h9.5c1.39823,0 2.5,1.10177 2.5,2.5v22c0,1.39823 -1.10177,2.5 -2.5,2.5h-9.5zM31.5,15c-0.54095,-0.00765 -1.04412,0.27656 -1.31683,0.74381c-0.27271,0.46725 -0.27271,1.04514 0,1.51238c0.27271,0.46725 0.77588,0.75146 1.31683,0.74381h4c0.54095,0.00765 1.04412,-0.27656 1.31683,-0.74381c0.27271,-0.46725 0.27271,-1.04514 0,-1.51238c-0.27271,-0.46725 -0.77588,-0.75146 -1.31683,-0.74381zM12.99805,17.1582c-0.28884,-0.00771 -0.58395,0.06825 -0.8457,0.23438c-0.698,0.445 -0.90298,1.37131 -0.45899,2.07031l2.98828,4.69531l-2.98828,4.69531c-0.444,0.699 -0.23901,1.62531 0.45899,2.07031c0.25,0.158 0.52869,0.23438 0.80469,0.23438c0.495,0 0.98158,-0.24436 1.26758,-0.69336l2.23438,-3.51172l2.23438,3.50977c0.287,0.449 0.77258,0.69531 1.26758,0.69531c0.276,0 0.55273,-0.07437 0.80273,-0.23437c0.698,-0.445 0.90494,-1.37326 0.46094,-2.07227l-2.98633,-4.69336l2.98633,-4.69336c0.444,-0.699 0.23706,-1.62727 -0.46094,-2.07227c-0.697,-0.444 -1.62431,-0.23906 -2.07031,0.46094l-2.23437,3.50977l-2.23438,-3.51172c-0.27812,-0.4375 -0.74517,-0.68052 -1.22656,-0.69336zM31.5,23c-0.54095,-0.00765 -1.04412,0.27656 -1.31683,0.74381c-0.27271,0.46725 -0.27271,1.04514 0,1.51238c0.27271,0.46725 0.77588,0.75146 1.31683,0.74381h4c0.54095,0.00765 1.04412,-0.27656 1.31683,-0.74381c0.27271,-0.46725 0.27271,-1.04514 0,-1.51238c-0.27271,-0.46725 -0.77588,-0.75146 -1.31683,-0.74381zM31.5,31c-0.54095,-0.00765 -1.04412,0.27656 -1.31683,0.74381c-0.27271,0.46725 -0.27271,1.04514 0,1.51238c0.27271,0.46725 0.77588,0.75146 1.31683,0.74381h4c0.54095,0.00765 1.04412,-0.27656 1.31683,-0.74381c0.27271,-0.46725 0.27271,-1.04514 0,-1.51238c-0.27271,-0.46725 -0.77588,-0.75146 -1.31683,-0.74381z"
              ></path>
            </g>
          </g>
        </svg>
      </div>
      <a
        (click)="downloadExcel()"
        class="font-family text-sm text-[#275C85FF] hover:underline cursor-pointer border-b-blue-500"
        >{{ "download.excel" | translate }}</a
      >
    </div>

    <div
      class="flex bg-white p-2 shadow rounded-lg items-center gap-2 cursor-pointer"
      [matMenuTriggerFor]="menu"
      matTooltip="{{ 'select.period' | translate }}"
    >
      <div class="w-6 h-6">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7"
              stroke="#2B88CC"
              stroke-width="2"
              stroke-linecap="round"
            ></path>
            <rect
              x="6"
              y="12"
              width="3"
              height="3"
              rx="0.5"
              fill="#2B88CC"
            ></rect>
            <rect
              x="10.5"
              y="12"
              width="3"
              height="3"
              rx="0.5"
              fill="#2B88CC"
            ></rect>
            <rect
              x="15"
              y="12"
              width="3"
              height="3"
              rx="0.5"
              fill="#2B88CC"
            ></rect>
          </g>
        </svg>
      </div>
      <div class="text-sm text-[#2B88CC] mt-1">
        {{ selectedPeriod.start }} - {{ selectedPeriod.end }}
      </div>
    </div>

    <div class="m-2">
      <div class="relative">
        <div class="absolute inset-y-0 flex items-center ps-3">
          <svg
            class="w-4 h-4 text-gray-500 dark:text-gray-400"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 20 20"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
            />
          </svg>
        </div>
        <input
          (keyup)="filteredCostSearch()"
          type="search"
          [formControl]="searchInput"
          class="block w-48 p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-blue-500"
          placeholder="{{ 'search' | translate }}"
          required
        />
      </div>
    </div>
  </div>

  <div class="flex flex-col w-full pl-4 pr-4 flex-1 overflow-y-auto">
    <div
      (click)="editCost(cost)"
      *ngFor="let cost of filteredEventCostList"
      class="flex m-1"
    >
      <div
        class="grid grid-cols-[min-content_1fr_1fr_1fr_1fr_min-content] p-5 gap-5 items-center bg-white border border-gray-200 rounded-lg shadow cursor-pointer w-full"
      >
        <div>
          <div *ngIf="cost.event_id == null">
            <svg width="30px" height="30px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="none"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path stroke="#74a7fe" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M23 27H7a2 2 0 01-2-2V7a2 2 0 012-2h14a2 2 0 012 2v6m0 14h2a2 2 0 002-2V15a2 2 0 00-2-2h-2m0 14V13M9 10h4M9 17h10M9 21h6"></path> <path fill="#74a7fe" d="M20 10a1 1 0 11-2 0 1 1 0 012 0z"></path> </g></svg>
          </div>
          <svg
            *ngIf="cost.event_id"
         width="30px" height="30px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="none"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path stroke="#74a7fe" stroke-linejoin="round" stroke-width="2" d="M5 11c0-1 1-2 2-2h18c1 0 2 1 2 2v4h-2v10c0 1-1 2-2 2H9c-1 0-2-1-2-2V15H5v-4z"></path> <path stroke="#74a7fe" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 15h18M16 9v18M16 9c-1.333-2.833-4.1-7.4-6.5-5-2.4 2.4 3 5 6.5 5zM16 9c0-4.5 4.5-7.5 6.5-5.5C25 6 20 9 16 9z"></path> </g>
          </svg>
        </div>

        <div class="text-base font-family text-[#0e4166]">
          {{ cost.description }}
        </div>
        <div class="text-sm text-[#2B88CC] flex gap-2">
          {{ cost.type_of_cost.name }}
        </div>
        <div class="text-sm text-[#2B88CC]  flex gap-2">


          {{ cost.client.name }}
        </div>

        <div class="text-sm text-[#2B88CC] justify-end flex gap-2">
          {{ cost.amount | number: "1.2-2" }}
        </div>

        <div class="text-sm text-[#2B88CC] flex gap-2">
          {{ cost.date }}
        </div>
      </div>
    </div>
  </div>

  <div
    *ngIf="showInput"
    class="fixed top-0 left-0 w-full h-full bg-gray-400/60 flex justify-center items-center z-[100]"
  >
    <app-expenses-input
      [expenseForInput]="selectedExpenses"
      [costType]="costType"
      (closeExpense)="closeExpenses($event)"
    ></app-expenses-input>
  </div>
</div>
